{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport * as api from \"../api/userService\";\nimport sample from \"../data/users.json\";\nexport default function useUsers() {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const load = async () => {\n    setError(\"\");\n    setLoading(true);\n    try {\n      const data = await api.getUsers();\n      setUsers(data);\n    } catch (e) {\n      setError(\"Failed to fetch users. Using local sample.\");\n      setUsers(sample);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    load();\n  }, []);\n  const add = async payload => {\n    setError(\"\");\n    setLoading(true);\n    try {\n      const created = await api.createUser(payload);\n      const newItem = {\n        ...created,\n        id: Math.max(1000, ...users.map(u => u.id || 0)) + 1\n      };\n      setUsers(prev => [newItem, ...prev]);\n      return {\n        ok: true\n      };\n    } catch (e) {\n      setError(\"Failed to create user.\");\n      return {\n        ok: false\n      };\n    } finally {\n      setLoading(false);\n    }\n  };\n  const updateOne = async (id, payload) => {\n    setError(\"\");\n    setLoading(true);\n    try {\n      await api.updateUser(id, payload);\n      setUsers(prev => prev.map(u => u.id === Number(id) ? {\n        ...u,\n        ...payload\n      } : u));\n      return {\n        ok: true\n      };\n    } catch (e) {\n      setError(\"Failed to update user.\");\n      return {\n        ok: false\n      };\n    } finally {\n      setLoading(false);\n    }\n  };\n  const remove = async id => {\n    setError(\"\");\n    setLoading(true);\n    try {\n      await api.deleteUser(id);\n      setUsers(prev => prev.filter(u => u.id !== id));\n      return {\n        ok: true\n      };\n    } catch (e) {\n      setError(\"Failed to delete user.\");\n      return {\n        ok: false\n      };\n    } finally {\n      setLoading(false);\n    }\n  };\n  return {\n    users,\n    loading,\n    error,\n    add,\n    updateOne,\n    remove,\n    reload: load\n  };\n}\n_s(useUsers, \"jbqMkoeUOQ80BhXw5fkwMpm3ADs=\");","map":{"version":3,"names":["useEffect","useState","api","sample","useUsers","_s","users","setUsers","loading","setLoading","error","setError","load","data","getUsers","e","add","payload","created","createUser","newItem","id","Math","max","map","u","prev","ok","updateOne","updateUser","Number","remove","deleteUser","filter","reload"],"sources":["C:/Users/admin/Desktop/WebTech/user-management-assignment/src/hooks/useUsers.js"],"sourcesContent":["import { useEffect, useState } from \"react\"\nimport * as api from \"../api/userService\"\nimport sample from \"../data/users.json\"\n\nexport default function useUsers() {\n  const [users, setUsers] = useState([])\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState(\"\")\n\n  const load = async () => {\n    setError(\"\")\n    setLoading(true)\n    try {\n      const data = await api.getUsers()\n      setUsers(data)\n    } catch (e) {\n      setError(\"Failed to fetch users. Using local sample.\")\n      setUsers(sample)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => { load() }, [])\n\n  const add = async payload => {\n    setError(\"\")\n    setLoading(true)\n    try {\n      const created = await api.createUser(payload)\n      const newItem = { ...created, id: Math.max(1000, ...users.map(u=>u.id||0)) + 1 }\n      setUsers(prev => [newItem, ...prev])\n      return { ok:true }\n    } catch (e) {\n      setError(\"Failed to create user.\")\n      return { ok:false }\n    } finally { setLoading(false) }\n  }\n\n  const updateOne = async (id, payload) => {\n    setError(\"\")\n    setLoading(true)\n    try {\n      await api.updateUser(id, payload)\n      setUsers(prev => prev.map(u => u.id === Number(id) ? { ...u, ...payload } : u))\n      return { ok:true }\n    } catch (e) {\n      setError(\"Failed to update user.\")\n      return { ok:false }\n    } finally { setLoading(false) }\n  }\n\n  const remove = async id => {\n    setError(\"\")\n    setLoading(true)\n    try {\n      await api.deleteUser(id)\n      setUsers(prev => prev.filter(u => u.id !== id))\n      return { ok:true }\n    } catch (e) {\n      setError(\"Failed to delete user.\")\n      return { ok:false }\n    } finally { setLoading(false) }\n  }\n\n  return { users, loading, error, add, updateOne, remove, reload: load }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}